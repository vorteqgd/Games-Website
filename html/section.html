<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>67 Games</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="nav">
        <script src="/nav.js"></script>
        <script>createNav()</script>
    </div>
    <div x-data="app()" x-init="loadData()">

        <!-- title -->
        <div class="header">
            <h1 class="title"><span x-text="tag"></span> section</h1>
        </div>
        <div class="main">

            <!-- games -->
            <div class="games">

                <template x-for="game in games" :key="game.id">
                    <div class="game" :style="`background-image: url(${game.thumbnail})`">
                        <a :href="`/game/${game.id}`" class="game-title" x-text="game.title"></a>
                    </div>
                </template>

            </div>
        </div>
    </div>


    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
        function app() {
            return {
                games: [],
                tag: "",
                async loadData() {
                    const pathParts = window.location.pathname.split("/");
                    const sParam = decodeURIComponent(pathParts[pathParts.length - 1]);

                    const res = await fetch("/server/" + sParam);
                    const data = await res.json();

                    this.tag = sParam.toString().charAt(0).toUpperCase() + String(sParam).slice(1);
                    this.games = data;

                    document.title = sParam + " section - 67 Games";
                }
            };
        }
    </script>
</body>

</html>